!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash"),require("jquery")):"function"==typeof define&&define.amd?define(["lodash","jquery"],t):"object"==typeof exports?exports["@tomasc/simple_form_dependent_fields"]=t(require("lodash"),require("jquery")):e["@tomasc/simple_form_dependent_fields"]=t(e.lodash,e.jquery)}(window,function(e,t){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";(function(e){var i=n(0),s=n(3),r=[].indexOf;t.a=function(){class t extends s.a{init(){return this.scope_element=this.get_scope_element(),this.form_update_handler=(t=>{if(this.$element.is(":visible")&&this.is_dependent_on_input(e(t.target))&&e(t.target).closest(this.options.scope_selector).is(this.scope_element))return this.update_dependent_fields()}),this.scope_element.on("change.SimpleFormDependentFields","input,select",this.form_update_handler),this.update_dependent_fields()}destroy(){return this.scope_element.off(".SimpleFormDependentFields","input,select",this.form_update_handler)}depends_on(){return this.$element.data("depends-on")}depends_on_any(){return this.depends_on().depends_on_any}depends_on_all(){return this.depends_on().depends_on_all}depends_on_none(){return this.depends_on().depends_on_none}get_form(){return this.$element.closest("form")}get_input(e){return this.get_inputs().filter(`[name$='[${e}]']`)}get_input_names(){return Object.keys(this.depends_on_any()||{}).concat(Object.keys(this.depends_on_all()||{}).concat(Object.keys(this.depends_on_none()||{})))}get_inputs(){return this.scope_element.find("input,select").not(":hidden").filter((t,n)=>e(n).closest(this.options.scope_selector).is(this.scope_element))}get_scope_element(){return this.$element.closest(this.options.scope_selector)}is_dependent_on_input(e){return Object(i.filter)(this.get_input_names(),function(t){return e.is(`[name$='[${t}]']`)}).length>0}update_dependent_fields(){return this.is_condition_valid()?this.show_content():this.hide_content()}show_content(){var t;if(!(this.$element.children().length>0)&&(t=this.$element.data("template-html")))return this.$element.append(e(t))}hide_content(){var e;if(e=this.$element.children().remove(),!this.$element.data("template-html"))return this.$element.data("template-html",e)}is_condition_valid(){switch(!1){case!this.depends_on_any():return this.is_any_valid();case!this.depends_on_all():return this.is_all_valid();case!this.depends_on_none():return this.is_none_valid()}}is_any_valid(){var e,t,n,s,r,o,l,d,a;for(s in l=!1,r=this.depends_on_any())for(a=r[s],t=0,n=(o=Object(i.flatten)([a])).length;t<n;t++)d=o[t],e=this.is_valid(s,d),l=l||e;return l}is_all_valid(){var e,t,n,s,r,o,l,d,a;for(s in l=!0,r=this.depends_on_all())for(a=r[s],t=0,n=(o=Object(i.flatten)([a])).length;t<n;t++)d=o[t],e=this.is_valid(s,d),l=l&&e;return l}is_none_valid(){var e,t,n,s,r,o,l,d,a;for(s in l=!0,r=this.depends_on_none())for(a=r[s],t=0,n=(o=Object(i.flatten)([a])).length;t<n;t++)d=o[t],e=this.is_valid(s,d),l=l&&!e;return l}is_valid(e,t){var n;switch(n=this.get_input(e),t=t.toString()){case"true":t="1";break;case"false":t="0"}switch(n.prop("type")){case"radio":return n.filter(":checked").val()===t;case"checkbox":switch(t){case"1":return n.filter(":checked").length>0;default:return n.not(":checked").length>0}break;case"select-one":return n.val()===t;case"select-multiple":return r.call(n.val(),t)>=0;default:return n.val()===t}}}return t.defaults={name:"SimpleFormDependentFields",debug:!1,scope_selector:".simple_form_dependent_fields__scope, .simple_form_dependent_fields__item, form"},t}.call(void 0)}).call(this,n(1))},function(e,t,n){"use strict";(function(e){t.a=class{static register(){var e,t,n,i;return this,t=(e=null!=(n=this.defaults)?n:{}).name||(e.name=/function ([^(]*)/.exec(this+"")[1]),Array.prototype.slice.call(arguments).slice(1),null!=(i=arguments[0])?i:this.selector,this.init_plugin(this,t)}static init_plugin(t,n){if(void 0===e.fn[n])return e.fn[n]=function(e){var i,s,r;return i=arguments,s=`plugin_${n}`,void 0===e||"object"==typeof e?this.each(function(){var n;if(this.pluginInstances||(this.pluginInstances={}),!this.pluginInstances[s])return n=new t(this,e),this.pluginInstances[s]=n}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(r=void 0,this.each(function(){var n;if(this.pluginInstances||(this.pluginInstances={}),(n=this.pluginInstances[s])instanceof t&&"function"==typeof n[e]&&(r=n[e].apply(n,Array.prototype.slice.call(i,1))),"destroy"===e)return this.pluginInstances[s]=null}),void 0!==r?r:this):void 0}}constructor(t,n){this.element=t,this.options=e.extend({},this.constructor.defaults,n),this.$element=e(this.element),this.init()}}}).call(this,n(1))},function(e,t,n){"use strict";n.r(t);var i=n(2);t.default=i.a}])});